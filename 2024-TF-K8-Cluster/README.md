# DevOps Practical Assignment

## Cluster

El primer paso, es definir el Cluster, lo creo con Terraform, pensado para AWS EKS.

En el mismo Terraform se incluyen los distintos elementos a crear, para no utilizar los por default, entonces se crea la VPC, Subnets, Security Groups, LoadBalancer, Ingress, etc.

Todo esto se puede ejecutar facilmente con los comandos habituales, terraform init, terraform fmt, terraform validate, para luego pasar a terraform plan y finalmente aplicar los cambios con apply.

Mi cuenta personal de AWS (la creé ayer, con free tier) no me permite utilizar demasiados recursos, por ejemplo no me deja crear mas de una instancia lo que no me permitió crear los nodos, pero fuí probando cada parte por separado, en caso de tener oportunidad de charlar acerca de lo entregado lo vemos por si algo se me pasó en los scripts.

## DB

Por la definición del problema, creo que lo mejor sería levantar una DB en RDS, aprovechando el poder de procesamiento de AWS, en vez de levantar directamente nodos con bases de datos, entiendo que RDS es mas seguro, mas potente y escalable. Adjunto scripts de Terraform para levantar la DB en RDS, así como unos simples ejemplos de Deployments que se pueden ejecutar en el Cluster utilizando kubectl.

## Persistent Storage

Para el Persistent Storage, con RDS para empezar puedo utilizar S3, para el código de la aplicación directamente ejeutaría Persistent Volume Claims en los yaml que levanten los pods, no me quedó claro si para este ejemplo yo debería haber desarrollado una app y levantarla, o solamente eran tareas de SRE.

## Seguridad y Monitoreo

Para la Seguridad del Cluster y las aplicaciones corriendo implementaría network policies, RBAC (control de accesos por rol de cada usuario) y TLS encryption.

Para el monitoreo levantaría por fuera del Cluster de la aplicación un Grafana y Prometheus, en mi caso prefiero levantar el monitoreo utilizando EC2 con un Debian con Docker en la misma región del cluster. En caso que la aplicación escale demasiado evaluaría utilizar Thanos para farmear varios Prometheus. Además le agregaría Loki para manejo de logs, que se puede implementar facilmente dentro de Grafana. Adjunto docker-compose para levantarlos.

## Resguardo de la Información

Recomendaría Backups diarios de todo el sistema, así como distintas estrategias de disaster recovery, para asegurar disponibilidad e integridad de la Aplicación, incluso en casos de fallos o ataques.

## DevOps

Realizaría un trabajo de CI/CD con el proyecto de Desarrollo, utilizando control de versiones en Github o Gitlab, apoyándome en Jenkins o Github Actions para la integracíon continua del código. Personalmente para el Deployment contínuo prefiero estrategias de Blue/Green, cuando se tiene todo Automatizado con Terraform es mucho más seguro que una estrategia de Rolling, descartando totalmente la estrategia Canary para este tipo de proyectos.

### Agradecimientos

Desde ya les agradezco por el tiempo que le dedicaron a la lectura y análisis de este trabajo práctico, quizá haya quedado alguna duda o ángulo para cubrir, quedo a las órdenes para reunirnos y charlar sobre el proyecto.

Saludos cordiales,

2024/02/22 - Pablo Rappalini - rappalini@gmail.com

# DEFINICION DE RECURSOS SOLICITADOS:

Practical Assignment
Deploying and Scaling a Kubernetes Application with Terraform
Task
Your company is launching a new product, and you are responsible for deploying and managing the infrastructure. You need to create a Kubernetes cluster to run the application, use Terraform to automate the creation of the necessary cloud resources, and deploy a database to store data generated by the application.

The infrastructure should be secure and follow best practices.

Use Terraform to create the necessary cloud resources (e.g., VMs, load balancers, databases) to run the application and the database.

Deploy the application to the Kubernetes cluster.
Deploy the database to the infrastructure and configure it for high availability and
scalability.

Please submit your Terraform and Kubernetes configuration files, along with a README
explaining your architecture choices and how you ensured the infrastructure is secure.
Additionally, please include the scripts or commands used to deploy and configure the
database.
